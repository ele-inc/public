<script type="module">
  import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.esm.min.mjs';
  mermaid.initialize({
    startOnLoad: true,
    theme: 'default'
  });

  // Wait for DOM to be ready, then render diagrams
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', function() {
      mermaid.run({
        querySelector: '.language-mermaid',
      });
    });
  } else {
    // DOM is already ready
    mermaid.run({
      querySelector: '.language-mermaid',
    });
  }
</script>
